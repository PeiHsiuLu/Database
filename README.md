# 113-1 Database

**Name:** å‘‚æ²›ä¿®  
**Lecturer:** è”¡èŠ¸ç¤æ•™æˆ  
**Department and Grade:** ç§‘æŠ€ç³»ä¸‰å¹´ç´š  

---

## Final Project

---


## Homework
- [HW1 ç°¡æ˜“ç™»å…¥/è¨»å†Šç³»çµ±](#hw1-ç°¡æ˜“ç™»å…¥è¨»å†Šç³»çµ±)  
  - [1. HW1 ç¨‹å¼ç¢¼](https://github.com/PeiHsiuLu/Database/tree/main/Week3/mysql_and_flask)  
  - [2. HW1 å½±ç‰‡](https://youtu.be/846RmjGRTiY)
  - è£œå……ï¼šMySQLWorkbenchåŠæ™‚å„²å­˜åŸå½±ç‰‡åªéŒ„è£½åˆ°å·²å„²å­˜çš„è³‡æ–™ï¼Œå¾ŒçºŒæœ‰å†è£œä¸€éš»çŸ­ç‰‡æ”¾åœ¨å½±ç‰‡ç°¡ä»‹å€è­‰æ˜è³‡æ–™å¯åœ¨SQLè¢«åŠæ™‚å„²å­˜  
- [HW2]()
- [HW3]()
- [HW4]()
### HW1 ç°¡æ˜“ç™»å…¥/è¨»å†Šç³»çµ±
é€™æ¬¡ä½œæ¥­ä¸»è¦æ˜¯ç·´ç¿’ï¼Œåˆ©ç”¨ Flask çµåˆ MySQL è£½ä½œä¸€å€‹ç°¡æ˜“çš„ç™»å…¥è¨»å†Šé é¢ã€‚åŒæ™‚ï¼Œåšåˆ°å¯ä»¥å°‡å·²è¨»å†Šçš„å¸³è™Ÿã€å¯†ç¢¼åˆ©ç”¨ MySQL å„²å­˜ã€‚  


  
**åœ–ä¸€ï¼šè¨»å†Šç•«é¢** 
![image](https://github.com/user-attachments/assets/81a79b28-c15e-4d1a-87b7-250ab72f9295)  

**åœ–äºŒï¼šç™»å…¥ç•«é¢**  
![image](https://github.com/user-attachments/assets/a915d09b-ddb2-489f-932f-4f947ca8366d)  

**åœ–ä¸‰ï¼šç™»å…¥å¾Œå‡ºç¾çš„é é¢**  
![image](https://github.com/user-attachments/assets/abc3cec6-baf8-44a8-8674-e50f0f0f7680)  

**åœ–å››ï¼šç™»å‡ºç•«é¢ (è·³å›ç™»å…¥ç•«é¢ï¼Œä¸¦ç”¨flashæç¤º)**  
![image](https://github.com/user-attachments/assets/5206a0c6-2a45-4139-81db-8d9722ed1d50)  
**åœ–äº”ï¼šWorkBench**  
![image](https://github.com/user-attachments/assets/ab0b6529-c723-4ef3-b487-91efb7f63e93)
- workbenchå­˜æ”¾å…¬å¸å“¡å·¥çš„ç™»å…¥è³‡æ–™ï¼Œid,name,password ç…§é †åºæ’åˆ—ï¼Œå¯†ç¢¼ç”¨å“ˆå¸Œå€¼äº‚æ•¸éš¨æ©Ÿå„²å­˜ã€‚
- ç›¸åŒçš„ä¿¡ç®±ä¸å¯å†è¢«è¨»å†Š







---

## Notes
- [1. Week 1: Course Introduction (0902-0908)](#week-1-course-introduction-0902-0908)  
- [2. Week 2: Install Flask & SQL in Flask (0909-0915)](#week-2-install-flask-and-sql-in-flask-0909-0915)
- [3. Week 3: Flask Connect to MySQL (0916-0922)](#week-3-flask-connect-to-mysql-0916-0922)
- [4. Week 4: MySQL instruction and introduction (0923-0930)](#week-4-mysql-instruction-and-introduction-0923-0930)

### Week 1: Course Introduction (0902-0908)  

### Week 2: Install Flask and SQL in Flask (0909-0915)


**Create Flask environment:**  
å»ºç«‹ç°¡å–®çš„ Flask "Hello World" å°ˆæ¡ˆã€‚

---

æˆ‘ä½¿ç”¨ **Visual Studio Code** ä½œç‚ºæˆ‘çš„é–‹ç™¼å·¥å…·ã€‚

1. é¦–å…ˆï¼ŒæŒ‰ç…§è‡ªå·±å–œæ„›çš„åç¨±å‰µå»ºä¸€å€‹è³‡æ–™å¤¾ã€‚  
2. æ¥è‘—ï¼Œæ‰“é–‹çµ‚ç«¯æ©Ÿè¼¸å…¥ä»¥ä¸‹æŒ‡ä»¤ä¾†å®‰è£è™›æ“¬ç’°å¢ƒå·¥å…·ï¼š  
   ```bash
   pip install virtualenv
![image](https://github.com/user-attachments/assets/3c7f5b42-5126-43d7-b025-cf668ffbb8f9)  
  
  
![image](https://github.com/user-attachments/assets/607d42dd-7d62-4b7b-87c3-91ec44e7e43f)  

3. åˆ©ç”¨ virtualenv åœ¨ç•¶å‰ç›®éŒ„ä¸‹å»ºç«‹åç‚º env çš„è™›æ“¬ç’°å¢ƒã€‚
   ```bash
   virtualenv env
4. åœ¨ windows ç’°å¢ƒä¸‹ï¼Œè¼¸å…¥ä»¥ä¸‹æŒ‡ä»¤å·²å•Ÿå‹•è™›æ“¬ç’°å¢ƒï¼š
   ```bash
   .\env\Scripts\Activate
   ```

   åœ¨linuxç’°å¢ƒä¸‹ï¼Œå‰‡æ˜¯åœ¨çµ‚ç«¯æ©Ÿè¼¸å…¥ä»¥ä¸‹æŒ‡ä»¤å•Ÿå‹•è™›æ“¬ç’°å¢ƒ  
   ```bash
   source env/bin/activate
   ```
5. æ¥è‘—åœ¨è™›æ“¬ç’°å¢ƒä¸‹å®‰è£ Flask-SQLAlchemy
   ```bash
   pip install flask Flask-SQLAlchemy
   ```
6. åœ¨æœ€åŸå§‹å‰µå»ºçš„è³‡æ–™å¤¾åº•ä¸‹å‰µå»ºä¸€å€‹.pyæª”ï¼Œç”¨ä¾†æ¸¬è©¦ "Hello World"ï¼Œä¸¦è¼¸å…¥ä»¥ä¸‹ä»£ç¢¼ï¼š
    ```bash
   from flask import Flask #å°å…¥flaskå¥—ä»¶

   app = Flask(__name__)
   
   @app.route('/')
   
   def index():
       return "Hello world!"
   
   if __name__ == "__main__":
       app.run(debug=True)
   ```
7. åœ¨çµ‚ç«¯æ©Ÿè¼¸å…¥ python æª”å.py åŸ·è¡Œæª”æ¡ˆã€‚æ­¤æ™‚ï¼Œçµ‚ç«¯æ©Ÿæœƒå‡ºç¾ä¸€å€‹ç¶²å€ (ex.  http://127.0.0.1:5000)ä¸¦é¡¯ç¤ºä¸€è¡Œæ–‡å­—ï¼šRunning on...(ç¶²å€)ã€‚é»æ“Šå¾Œå³å¯é€²å…¥åˆ©ç”¨ Flask æ¶å¥½çš„ç¶²ç«™ã€‚  
   ![image](https://github.com/user-attachments/assets/f4eeb081-89ac-4f92-a1fa-655491fd2f3b)


   ![image](https://github.com/user-attachments/assets/34338605-001b-4dfe-8f37-72ce67ee9f62)


**Flask + SQL**  
å¦‚ä½•å°‡ Flask èˆ‡ SQL é€£çµï¼Ÿ  
* [å¯åƒè€ƒä»£ç¢¼ï¼šTask Master](https://github.com/PeiHsiuLu/Database/tree/master)  
* [åƒè€ƒçš„æ•™å­¸å½±ç‰‡ï¼šLearn Flask for Python - Full Tutorial](https://www.youtube.com/watch?v=Z1RJmh_OqeA)  

#### 1. å®‰è£ Flask å’Œ SQLAlchemy

é¦–å…ˆï¼Œç¢ºä¿å®‰è£äº† Flask å’Œ SQLAlchemyã€‚å¯ä»¥ä½¿ç”¨ä»¥ä¸‹å‘½ä»¤å®‰è£ï¼š

```bash
pip install Flask SQLAlchemy
```

#### 2. è¨­å®š Flask æ‡‰ç”¨

éœ€è¦è¨­ç½® Flask æ‡‰ç”¨ç¨‹åºä¸¦é…ç½® SQLAlchemyã€‚ä»¥ä¸‹æ˜¯å¦‚ä½•åšï¼š  

```python
from flask import Flask
from flask_sqlalchemy import SQLAlchemy

app = Flask(__name__)
app.config['SQLALCHEMY_DATABASE_URI'] = 'sqlite:///path/to/your/database.db'
db = SQLAlchemy(app)
```

app.config['SQLALCHEMY_DATABASE_URI']ï¼šé€™è£¡è¨­å®šäº†è³‡æ–™åº«çš„ä½ç½®ã€‚é€™å€‹ä¾‹å­ä½¿ç”¨çš„æ˜¯ SQLiteï¼Œå¯ä»¥æ ¹æ“šéœ€è¦æ”¹æˆå…¶ä»–è³‡æ–™åº«ã€‚  

#### 3. å®šç¾©è³‡æ–™åº«æ¨¡å‹  

ä½¿ç”¨ SQLAlchemy å®šç¾©è³‡æ–™åº«æ¨¡å‹ã€‚é€™äº›æ¨¡å‹æœƒæ˜ å°„åˆ°è³‡æ–™åº«ä¸­çš„è¡¨æ ¼ï¼š

```python
from datetime import datetime

class Todo(db.Model):
    id = db.Column(db.Integer, primary_key=True)
    content = db.Column(db.String(200), nullable=False)
    completed = db.Column(db.Boolean, default=False)
    date_created = db.Column(db.DateTime, default=datetime.utcnow)

    def __repr__(self):
        return '<Task %r>' % self.id
```
* idï¼šæ¯å€‹ä»»å‹™çš„å”¯ä¸€æ¨™è­˜ç¬¦ã€‚  
* contentï¼šä»»å‹™å…§å®¹ã€‚  
* completedï¼šæ¨™è¨˜ä»»å‹™æ˜¯å¦å®Œæˆçš„å¸ƒæ—å€¼ã€‚  
* date_createdï¼šä»»å‹™å‰µå»ºæ—¥æœŸå’Œæ™‚é–“ã€‚  

#### 4. å‰µå»ºè³‡æ–™åº«å’Œè¡¨æ ¼
å‰µå»ºè³‡æ–™åº«è¡¨æ ¼ï¼Œé€™æ¨£ SQLAlchemy æ‰çŸ¥é“åœ¨å“ªè£¡å­˜å„²æ•¸æ“šï¼š  
```python
if __name__ == "__main__":
    with app.app_context():
        db.create_all()
    app.run(debug=True)
```
db.create_all()ï¼šæœƒæ ¹æ“šä½ å®šç¾©çš„æ¨¡å‹å‰µå»ºæ‰€æœ‰éœ€è¦çš„è¡¨æ ¼ã€‚  

#### 5. ä½¿ç”¨ SQLAlchemy æ“ä½œè³‡æ–™åº«
  
**å‰µå»ºç´€éŒ„**  
  
```python
new_task = Todo(content="Learn Flask with SQLAlchemy")
db.session.add(new_task)
db.session.commit()
```

**è®€å–ç´€éŒ„**  
  
```python
tasks = Todo.query.all()
```
**æ›´æ–°ç´€éŒ„**  
  
```python
task = Todo.query.get(1)
task.content = "Update task content"
db.session.commit()
```
**åˆªé™¤ç´€éŒ„**  
  
```python
task = Todo.query.get(1)
db.session.delete(task)
db.session.commit()
```
#### 6. ç¯„ä¾‹ï¼šTask Master
ä»¥ä¸‹åˆ©ç”¨æˆ‘çš„ä»£ç¢¼ä½œç‚ºç¯„ä¾‹ï¼š  
```python
from flask import Flask, render_template, request, redirect
from flask_sqlalchemy import SQLAlchemy
from datetime import datetime

# åˆå§‹åŒ– Flask æ‡‰ç”¨ç¨‹å¼
app = Flask(__name__)

# è¨­å®š SQLAlchemy è³‡æ–™åº« URI
app.config['SQLALCHEMY_DATABASE_URI'] = 'sqlite:///C:/Users/Paul2/Flask-introduction/test.db'
db = SQLAlchemy(app)

# å®šç¾©è³‡æ–™åº«æ¨¡å‹
class Todo(db.Model):
    id = db.Column(db.Integer, primary_key=True)  # ä»»å‹™çš„å”¯ä¸€æ¨™è­˜ç¬¦
    content = db.Column(db.String(200), nullable=False)  # ä»»å‹™å…§å®¹
    completed = db.Column(db.Integer, default=0)  # ä»»å‹™æ˜¯å¦å®Œæˆï¼Œé è¨­ç‚º 0ï¼ˆæœªå®Œæˆï¼‰
    date_created = db.Column(db.DateTime, default=datetime.utcnow)  # ä»»å‹™å‰µå»ºæ—¥æœŸï¼Œé è¨­ç‚ºç•¶å‰æ™‚é–“

    def __repr__(self):
        return '<Task %r>' % self.id

# é¦–é è·¯ç”±
@app.route('/', methods=['POST', 'GET'])
def index():
    if request.method == 'POST':
        # å¾è¡¨å–®ç²å–ä»»å‹™å…§å®¹
        task_content = request.form['content']
        new_task = Todo(content=task_content)
        
        try:
            # å°‡æ–°ä»»å‹™æ·»åŠ åˆ°è³‡æ–™åº«
            db.session.add(new_task)
            db.session.commit()
            return redirect('/')
        except:
            return "There was an issue adding your task"
    else:
        # ç²å–æ‰€æœ‰ä»»å‹™ä¸¦æŒ‰å‰µå»ºæ—¥æœŸæ’åº
        tasks = Todo.query.order_by(Todo.date_created).all()
        return render_template('index.html', tasks=tasks)
    
# åˆªé™¤ä»»å‹™çš„è·¯ç”±
@app.route('/delete/<int:id>')
def delete(id):
    task_to_delete = Todo.query.get_or_404(id)  # æ ¹æ“š ID ç²å–ä»»å‹™
    
    try:
        # å¾è³‡æ–™åº«ä¸­åˆªé™¤ä»»å‹™
        db.session.delete(task_to_delete)
        db.session.commit()
        return redirect('/')
    except:
        return "There was a problem deleting that task."

# æ›´æ–°ä»»å‹™çš„è·¯ç”±
@app.route('/update/<int:id>', methods=['GET', 'POST'])
def update(id):
    task = Todo.query.get_or_404(id)  # æ ¹æ“š ID ç²å–ä»»å‹™
    
    if request.method == 'POST':
        # æ›´æ–°ä»»å‹™å…§å®¹
        task.content = request.form['content']
        
        try:
            # æäº¤æ›´æ”¹åˆ°è³‡æ–™åº«
            db.session.commit()
            return redirect('/')
        except:
            return "There was an issue updating your task"
    else:
        return render_template('update.html', task=task)

# æ‡‰ç”¨ç¨‹å¼å•Ÿå‹•
if __name__ == "__main__":
    # ä½¿ç”¨æ‡‰ç”¨ç¨‹å¼ä¸Šä¸‹æ–‡ä¾†å‰µå»ºè³‡æ–™åº«è¡¨æ ¼
    with app.app_context():
        db.create_all()
    app.run(debug=True)
```

### Week 3: Flask connect to MySQL (0916-0922)  

ä»Šæ—¥åšçš„å°ç·´ç¿’ï¼šè¨­è¨ˆç™»å…¥+è¨»å†Šä»‹é¢  
* Flask + MySQL
* MySQL connector: ç”±æ–¼ MySQL å±¬æ–¼ç¬¬ä¸‰æ–¹å¥—ä»¶ï¼Œæ‰€ä»¥å¿…é ˆåˆ©ç”¨ MySQL connector ä¸²æ¥ Flaskï¼ŒFlask é–‹ç™¼çš„ç¶²é æ‰èƒ½é †åˆ©åœ¨ localhost ä¸Šé‹è¡Œ
  ä¾åºå®‰è£ä»¥ä¸‹æª”æ¡ˆåœ¨ç³»çµ±å…§ï¼Œå³å¯å®‰è£MySQL connectorï¼š
  ```bash
  pip install mysql-connector
  pip install mysql-connector-python
  pip install mysql-connector-python-rf
  ```
* MySQLçš„é è¨­å€¼ï¼šPORT:3306ï¼›user:root é€™äº›é è¨­å€¼æ˜¯MySQLæå‰å…ˆå¹«ä½ é è¨­å¥½çš„ï¼Œä¸éœ€è¦æ”¹å‹•ã€‚

### Week 4 MySQL instruction and introduction (0923-0930)
  
#### SQLç°¡ä»‹
SQL = Structured(çµæ§‹åŒ–)Query(è©¢å•) Language(èªè¨€)  
SQL ä¸»è¦çš„å››å¤§åŠŸèƒ½ï¼šCreate(å‰µå»º), Retrieve(æª¢ç´¢), Update(æ›´æ–°), Delete(åˆªé™¤)  

SQL V.S NOSQL:  
- SQL:
  - ä½¿ç”¨çµæ§‹åŒ–çš„è¡¨æ ¼ä¾†å­˜å„²è³‡æ–™ï¼Œè¡¨æ ¼æœ‰è¡Œå’Œåˆ—ï¼Œè³‡æ–™éµå¾ªåš´æ ¼çš„æ¨¡å¼ï¼ˆschemaï¼‰ã€‚
  - ä½¿ç”¨çµæ§‹åŒ–æŸ¥è©¢èªè¨€ï¼ˆStructured Query Language, SQLï¼‰ä¾†æ“ä½œè³‡æ–™ï¼ŒæŸ¥è©¢èªæ³•å›ºå®šä¸”åŠŸèƒ½å¼·å¤§ã€‚
- NOSQL:
  - æ²’æœ‰å›ºå®šçš„æ¨¡å¼ï¼Œå¯ä»¥å„²å­˜éçµæ§‹åŒ–è³‡æ–™
  - æ²’æœ‰æ¨™æº–åŒ–çš„æŸ¥è©¢èªè¨€ï¼Œæ¯ç¨®è³‡æ–™åº«å¯èƒ½æœ‰ä¸åŒçš„æŸ¥è©¢æ–¹å¼ã€‚  
![image](https://github.com/user-attachments/assets/2f161b3c-8549-42f1-8315-9f64851cf3dd)  
åƒè€ƒåœ–ç‰‡ï¼šåƒè€ƒè‡ª youtube å½±ç‰‡ï¼šMySQL Full Course for free ğŸ¬  
